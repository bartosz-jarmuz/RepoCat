{"version":3,"sources":["searchcursor.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","doFold","noFold","Pos","ensureFlags","regexp","flags","current","ignoreCase","global","multiline","regexpFlags","target","i","length","indexOf","charAt","RegExp","source","searchRegexpForward","doc","start","line","ch","last","lastLine","lastIndex","string","getLine","match","exec","from","index","to","lastMatchIn","cutOff","newMatch","adjustPos","orig","folded","pos","foldFunc","min","max","Math","mid","len","slice","SearchCursor","query","options","caseFold","this","atOccurrence","clipPos","matches","reverse","fold","lines","split","search","first","firstLine","found","lastIndexOf","top","topString","cutFrom","end","endString","chunk","curLine","before","inside","startLine","startCh","test","maybeMultiline","String","prototype","normalize","str","toLowerCase","findNext","find","findPrevious","result","cmpPos","replace","newText","origin","splitLines","replaceRange","defineExtension","defineDocExtension","ranges","cur","getSearchCursor","getCursor","push","anchor","head","setSelections"],"mappings":"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"}