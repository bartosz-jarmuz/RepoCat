function setArrowDown(n){n.removeClass("icon-arrow-up").addClass("icon-arrow-down")}function setArrowUp(n){n.removeClass("icon-arrow-down").addClass("icon-arrow-up")}function setCookie(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toUTCString());document.cookie=n+"="+(t||"")+u+"; path=/"}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null}function eraseCookie(n){document.cookie=n+"=; Max-Age=-99999999;"}function getProjectsTable(n){var u=performance.now(),f=$("#ResultsTableData").data("showrepositorycolumn"),i=0,t,r;return i=n?showColumnsFromCookies(n):parseInt($("#ResultsTableData").attr("data-numberofextracolumns")),t=$("#ResultsTable").DataTable({pageLength:50,stateSave:!1,autoWidth:!0,processing:!0,lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],order:[[3,"asc"]],searchPanes:{layout:"columns-4",columns:[3,4,7,8],cascadePanes:!0,viewTotal:!0,dataLength:30,dtOpts:{order:[[1,"desc"]]}},columnDefs:[{targets:[0],visible:!0,searchable:!1,width:"2%"},{targets:[1],visible:!1},{targets:[2],visible:f.toUpperCase()=="TRUE"},{targets:[3]},{targets:[5]},],columns:getColumns(i),dom:"R<'#SearchPanesHost'P><'#TopButtonsRow.row'<'col-md-1 first'l><'col-md-10 restore-columns-row'><'col-md-1 third'if>><rtip> "}),setupHideButtons(t),hideDefaultColumnsFromCookies(t),r=performance.now(),console.log("Drawing table: "+(r-u)+" milliseconds."),t}function showColumnsFromCookies(n){var u=0,e=getRepositoriesKey(),o=JSON.parse(n),i=o[e],r,t,f;if(i){for(u=i.length,r=0;r<i.length;r++)t=i[r],$("#ResultsTable > thead > tr").append('<th data-column-id="'+t+'">'+t+"<\/th>"),$("#ResultsTable > tbody > tr").each(function(n,i){insertCell(t,i)}),f=$('.add-column[data-property="'+t+'"'),f.hide();$("#ResultsTableData").attr("data-numberofextracolumns",u)}return u}function hideDefaultColumnsFromCookies(n){var i=getFromCollectionDictionaryCookie("hiddenDefaultColumns",getRepositoriesKey()),t,r;if(i)for(t=0;t<i.length;t++)r=n.column('[data-column-id="'+i[t]+'"]'),addHideDefaultColumnButton(r,i[t],i[t].replace("rc_","")),r.visible(!1)}function getColumns(n){var i=[{className:"details-control",orderable:!1,data:null,defaultContent:""},null,null,{searchPanes:{show:!0,orthogonal:"sp"},render:function(n,t){if(t==="sp"){var i=[];return $(n).closest(".project-name").each(function(){var n=$(this).text();n=n.trim();n.length>0&&i.push(n)}),i}return n}},{searchPanes:{show:!0}},null,null,{searchPanes:{show:!0,orthogonal:"sp"},render:function(n,t){if(t==="sp"){var i=[];return $(n,"i").each(function(){var n=$(this).text();n=n.trim();n.length>0&&i.push(n)}),i}return n}},{searchPanes:{show:!0,orthogonal:"sp"},render:function(n,t){if(t==="sp"){var i=[],r=$(n).children().closest(".description");return r.each(function(){var n=$(this).text();n=n.trim();n.length>0&&i.push(n.substring(0,40))}),i}return n}},],t;if(n!==undefined)for(t=0;t<n;t++)i.push(null);return i}function setupTableFeatures(n){setupRowExpanding(n);setupSearchPanes();alignSearchPanel();setupFiltering(n);alignTopButtonsRow();setupAddingColumns(n)}function format(n){var t=Object.values(n),i=$(t[0]);return i.html()}function addHideButtonToHeader(n){!$(n).find(".column-hide").length&&$(n).data("column-id")&&!$(n).append('&nbsp;<i class="column-hide icons icon-minus" data-toggle="tooltip" title="Click to hide the column"><\/i>')}function setupHideButtons(n){$("#ResultsTable th").each(function(){addHideButtonToHeader($(this))});$(".column-hide").off("click.rc.column-hide");$(".column-hide").on("click.rc.column-hide",function(t){var i,r,u;t.preventDefault();i=$(this).parent().data("column-id");r=n.column('[data-column-id="'+i+'"]');r.visible(!1);i.startsWith("rc_")?(u=$(this).parent().text(),addHideDefaultColumnButton(r,i,u)):($('.add-column[data-property="'+i+'"').show(),removeFromCollectionDictionaryCookie("activeColumns",getRepositoriesKey(),i))})}function addHideDefaultColumnButton(n,t,i){var r=$(".hide-default-column").first().clone(),u;r.attr("style","margin: 0px 2px; cursor: pointer;");r.attr("data-property",t);r.attr("title","Click to restore column: "+i);u=r.children("span").first();u.text(i);$(".restore-columns-row").append(r.show());addToCollectionDictionaryCookie("hiddenDefaultColumns",getRepositoriesKey(),t);r.click(function(){n.visible(!0);r.remove();removeFromCollectionDictionaryCookie("hiddenDefaultColumns",getRepositoriesKey(),t)})}function setupRowExpanding(n){$("#ResultsTable tbody").off("click.rc.rows");$("#ResultsTable tbody").on("click.rc.rows","td.details-control",function(){var i=$(this).closest("tr"),t=n.row(i);t.child.isShown()?$("div.slider",t.child()).slideUp(function(){t.child.hide();i.removeClass("shown")}):(t.child(format(t.data())).show(),i.addClass("shown"),$("div.slider",t.child()).slideDown())})}function alignTopButtonsRow(){$("#TopButtonsRow").children(".first").attr("style","margin-right: 10px;");$("#TopButtonsRow").children(".third").attr("style","margin-left: -10px;")}function alignSearchPanel(){var t=$(".dtsp-panes.dtsp-container"),n=$("#ResultsTable_filter label input").appendTo(t).wrap("<div class='col'><\/div>");$("#ResultsTable_filter label").remove();$(n).attr("style","width: 100%;");$(n).removeClass("form-control-sm");$(n).addClass("form-control-lg");$(n).attr("placeholder","Search table content...")}function setupSearchPanes(){$("#SearchPanesCard").empty();$("#SearchPanesHost").appendTo("#SearchPanesCard");$("#SearchPanesCollapser").off("click.rc.panes");$("#SearchPanesCollapser").on("click.rc.panes",function(){$("#SearchPanesCard").hasClass("show")?($("#SearchPanesCollapser").text("Show filters"),setCookie("searchPanesOpen","false")):(setCookie("searchPanesOpen","true"),$("#SearchPanesCollapser").text("Hide filters"))})}function setupAddingColumns(n){$(".add-column").off("click.rc.columns");$(".add-column").on("click.rc.columns",function(){var t=$(this).data("property");addColumn(this,t,n)})}function addColumn(n,t,i){var r=i.column('[data-column-id="'+t+'"]');r.length===0?(showOverlay(),setTimeout(function(){var r=$("#ResultsTableData").attr("data-numberofextracolumns");$("#ResultsTableData").attr("data-numberofextracolumns",parseInt(r)+1);i.destroy();$("#ResultsTable > thead > tr").append('<th data-column-id="'+t+'">'+t+"<\/th>");i.rows().nodes().to$().each(function(n,i){insertCell(t,i)});i=getProjectsTable();setupTableFeatures(i);$(n).hide();hideOverlay();addToCollectionDictionaryCookie("activeColumns",getRepositoriesKey(),t)},10)):($(n).hide(),r.visible(!0),addToCollectionDictionaryCookie("activeColumns",getRepositoriesKey(),t))}function insertCell(n,t){var r=$(t).find(".properties"),i=$(r).find(".property-name").filter(function(){return this.textContent==n}).parent().parent();i[0]!==undefined?$($.parseHTML("<td>"+i.find(".description").text()+"<\/td>")).appendTo(t):$($.parseHTML("<td><\/td>")).appendTo(t)}function showOverlay(){var n=$("#ResultsTable").closest(".card").find(".overlay");$(n).show().fadeIn()}function hideOverlay(){var n=$("#ResultsTable").closest(".card").find(".overlay");$(n).fadeOut()}function addToActiveColumns(n){addToCollectionDictionaryCookie("activeColumns",getRepositoriesKey(),n)}function removeFromActiveColumns(n){removeFromCollectionDictionaryCookie("activeColumns",getRepositoriesKey(),n)}function getRepositoriesKey(){return $("#ResultsTableData").attr("data-repositories")}function propertyFilter(n,t,i,r){var f=getFilters(),e,u;return f.length===0?!0:(e=getProperties(r),u=!0,f.forEach(function(n){var i=e.filter(function(t){return t.key===n.key}).find(function(){return!0}),t;if(i&&(t=!1,n.value.forEach(function(n){n===i.value&&(t=!0)}),!t)){u=!1;return}}),u)}function getProperties(n){var t=[],i=$($(n[8]).filter(function(){return this.tagName==="DIV"}));return i.each(function(){var n=$(this).find(".property-name").text(),i=$(this).find(".description").text().trim(),r={key:n,value:i};t.push(r)}),t}function getFilters(){var n=[],t=$(".filter-active");return t?(t.each(function(){var t=$(this).val(),i;t.toString().length>0&&(i={key:$(this).data("property"),value:t},n.push(i))}),n):n}function setupFiltering(n){$(".property-filter").off("change.rc.filter");$(".property-filter").on("change.rc.filter",function(){$(this).hasClass("filter-active")&&$(this).data("inactive")!=="TRUE"&&$(this).val()!==""&&(showOverlay(),setTimeout(function(){n.draw();hideOverlay()},10))});$(".filter-toggle").off("click.rc.filter");$(".filter-toggle").on("click.rc.filter",function(){var t=$(this).data("property"),i;$(this).hasClass("add-filter")&&(i=$('.property-filter[data-property="'+t+'"'),i.data("inactive","TRUE"),showFilter(i,this,t),addToCollectionDictionaryCookie("activeFilters",getRepositoriesKey(),t),i.data("inactive","FALSE"));$(this).hasClass("filter-label")&&(hideFilter(this,t,n),removeFromCollectionDictionaryCookie("activeFilters",getRepositoriesKey(),t))})}function showActiveFilters(){var n=getFromCollectionDictionaryCookie("activeFilters",getRepositoriesKey());n&&$(".filter-toggle").each(function(t,i){for(var f,r=$(i).data("property"),u=0;u<n.length;u++)n[u]===r&&(f=$('.property-filter[data-property="'+r+'"'),showFilter(f,$(i),r))})}function showFilter(n,t){var i=$(n.closest(".filter-host"));i.appendTo($("#PropertyFilters"));i.find(".property-filter").addClass("filter-active");i.fadeIn();i.find("i.add-remove-icon").removeClass("icon-plus").addClass("icon-minus");$(t).hide();i.find("input").attr("style","width: inherit;");i.find(".badge-property-name").show();i.find(".badge-property-name").attr("title","Remove filtering option");i.find(".property-filter").trigger("change")}function hideFilter(n,t,i){var r=$($(n).closest(".filter-host"));r.hide();r.find(".property-filter").removeClass("filter-active");r.appendTo("#HiddenPropertyFilters");$('.add-filter[data-property="'+t+'"').show();showOverlay();setTimeout(function(){i.draw();hideOverlay()},10)}function intializeSelect2(){$(".select2").each(function(){var n={};$(this).hasClass("form-control-lg")&&(n={color:"#4d555d","font-size":"large"});$(this).select2({theme:"bootstrap4",placeholder:$(this).attr("placeholder"),width:"style",allowClear:Boolean($(this).data("allow-clear")),containerCss:n})})}function getOrganizationFromKey(n){return n.split(":")[0]}function getRepositoryFromKey(n){return n.split(":")[1]}function isItemInArray(n,t,i){if(n){var r=n.split(t);return r.includes(i)}return!1}function trimStringMidsection(n){if(n.length>45){var t=n.length/2,r=n.substring(0,t),i=n.substring(t);return r.substring(0,20)+"(...)"+i.substring(i.length-20)}return undefined}function addToCollectionDictionaryCookie(n,t,i){var o=getCookie(n),u,f,r,e;if(o){r=void 0;try{r=JSON.parse(o)}catch(s){r={}}u=r[t];u?u.some(function(n){return n===i})||u.push(i):(f=[],f.push(i),r[t]=f);setCookie(n,JSON.stringify(r))}else r={},e=[],e.push(i),r[t]=e,setCookie(n,JSON.stringify(r))}function getFromCollectionDictionaryCookie(n,t){var i=getCookie(n),r;if(i){try{r=JSON.parse(i)}catch(u){return}return r[t]}}function removeFromCollectionDictionaryCookie(n,t,i){var e=getCookie(n),f,u,r;if(e){try{f=JSON.parse(e)}catch(o){return}if(u=f[t],u){for(r=0;r<u.length;r++)u[r]===i&&(u.splice(r,1),r--);setCookie(n,JSON.stringify(f))}}}$(document).ready(function(){$(function(){$('[data-toggle="collapse"]').on("click",function(){var n=$(this).find(".toggler-icon");n.hasClass("icon-arrow-up")?setArrowDown(n):setArrowUp(n)})})});$(document).ready(function(){var n,t;$(".nav-dropdown-toggle").click(function(){var r=$(this).text().trim(),n=getCookie("openNavItems"),f=$(this).parent(),i,t,u;if(f.hasClass("open")){if(n){for(i=n.split("_+_"),t=0;t<i.length;t++)i[t]===r&&(i.splice(t,1),t--);u=i.join("_+_");setCookie("openNavItems",u)}}else n?isItemInArray(n,"_+_",r)||(n+="_+_"+r,setCookie("openNavItems",n)):setCookie("openNavItems",r)});n=getCookie("openNavItems");n&&(t=n.split("_+_"),$(".nav-dropdown-toggle").each(function(){t.includes($(this).text().trim())&&$(this).parent().addClass("open")}))});$(document).ready(function(){$.get("/Home/NavHeaderStats",function(n){$("#NavHeaderStatsContainer").replaceWith(function(){return $(n).hide().fadeIn(500)})});intializeSelect2();$(".select2-inline").parent().find(".select2-container").addClass("inline-filter")});$(document).ready(function(){$.get("/Home/NavHeaderStats",function(n){$("#NavHeaderStatsContainer").replaceWith(function(){return $(n).hide().fadeIn(500)})});$(".sidebar-minimizer").on("click",function(){$("body").hasClass("brand-minimized sidebar-minimized")?setCookie("sidebarOpen","false"):setCookie("sidebarOpen","true")})});